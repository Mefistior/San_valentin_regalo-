<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para Laura ❤️</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:#f6d6df;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
}

.container{
    width:95%;
    max-width:1200px;
    background:#f2b8c6;
    border-radius:25px;
    padding:25px;
    box-shadow:0 15px 40px rgba(0,0,0,0.08);
}

.top-section{
    display:flex;
    gap:20px;
    flex-wrap:wrap;
}

.card{
    background:#ffe6ed;
    border-radius:20px;
    padding:25px;
    box-shadow:0 8px 20px rgba(0,0,0,0.06);
}

.text-card{
    flex:1;
    min-width:280px;
}

.tree-card{
    flex:1;
    min-width:280px;
    display:flex;
    justify-content:center;
    align-items:center;
}

.bottom-section{
    margin-top:25px;
}

.counter-card{
    text-align:center;
    font-size:18px;
    color:#6b2e44;
}

h1{
    color:#7a2e45;
}

p{
    color:#5a2a3b;
    line-height:1.6;
}

canvas{
    width:100%;
    height:420px;
}
</style>
</head>

<body>

<div class="container">

<div class="top-section">

<div class="card text-card">
<h1>Para Laura ❤️</h1>
<p>Eres la persona que llena mi mundo.</p>
<p>Eres mi felicidad y mi paz.</p>
<p>Eres el amor que encontré sin buscar.</p>
<p>Y cada día contigo es un regalo maravilloso.</p>
</div>

<div class="card tree-card">
<canvas id="treeCanvas"></canvas>
</div>

</div>

<div class="bottom-section">
<div class="card counter-card" id="counter"></div>
</div>

</div>

<script>
const canvas = document.getElementById("treeCanvas");
const ctx = canvas.getContext("2d");

canvas.width = canvas.offsetWidth;
canvas.height = 420;

let branches = [];
let heartPoints = [];
let started = false;

function startTree(){
    branches.push({
        x: canvas.width/2,
        y: canvas.height - 10,
        length: 100,
        angle: -Math.PI/2,
        width: 12,
        depth: 8
    });
    animate();
}

function animate(){
    if(branches.length === 0){
        drawHearts();
        return;
    }

    let newBranches = [];

    branches.forEach(b => {

        const x2 = b.x + b.length * Math.cos(b.angle);
        const y2 = b.y + b.length * Math.sin(b.angle);

        ctx.beginPath();
        ctx.strokeStyle = "#7b4b2a";
        ctx.lineWidth = b.width;
        ctx.lineCap = "round";
        ctx.moveTo(b.x, b.y);
        ctx.lineTo(x2, y2);
        ctx.stroke();

        heartPoints.push({x:x2, y:y2, depth:b.depth});

        if(b.depth > 0){
            const newLength = b.length * 0.75;
            const newWidth = b.width * 0.7;

            newBranches.push({
                x:x2,
                y:y2,
                length:newLength,
                angle:b.angle - 0.5,
                width:newWidth,
                depth:b.depth - 1
            });

            newBranches.push({
                x:x2,
                y:y2,
                length:newLength,
                angle:b.angle + 0.5,
                width:newWidth,
                depth:b.depth - 1
            });
        }

    });

    branches = newBranches;
    setTimeout(animate, 120);
}

function drawHeart(x,y,size,color){
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.bezierCurveTo(x,y-size/2,x-size/2,y-size/2,x-size/2,y);
    ctx.bezierCurveTo(x-size/2,y+size/2,x,y+size/2,x,y+size);
    ctx.bezierCurveTo(x,y+size/2,x+size/2,y+size/2,x+size/2,y);
    ctx.bezierCurveTo(x+size/2,y-size/2,x,y-size/2,x,y);
    ctx.fill();
}

function drawHearts(){
    const colors = ["#f497b6","#e77fa3","#ff8fab","#f6a5b6","#ffc2d1"];

    heartPoints.forEach(p=>{
        if(p.depth <= 4 || Math.random() > 0.6){
            const size = 6 + Math.random()*6;
            const offsetX = (Math.random()*14 - 7);
            const offsetY = (Math.random()*14 - 7);
            drawHeart(p.x+offsetX, p.y+offsetY, size,
                colors[Math.floor(Math.random()*colors.length)]
            );
        }
    });
}

startTree();

/* CONTADOR */
const startDate = new Date("2023-08-20T00:00:00");

function updateCounter(){
    const now = new Date();

    let years = now.getFullYear() - startDate.getFullYear();
    let months = now.getMonth() - startDate.getMonth();
    let days = now.getDate() - startDate.getDate();

    if(days < 0){
        months--;
        days += new Date(now.getFullYear(), now.getMonth(), 0).getDate();
    }

    if(months < 0){
        years--;
        months += 12;
    }

    document.getElementById("counter").innerHTML =
    `Mi amor por ti comenzó el 20/08/2023 ❤️<br>
    Han pasado ${years} años, ${months} meses y ${days} días juntos`;
}

updateCounter();
setInterval(updateCounter, 86400000);
</script>

</body>
</html>
