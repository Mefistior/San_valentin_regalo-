<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para Laura ❤️</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(to bottom,#ffd6e7,#fff0f6);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

/* ZONA CENTRAL */
#container{
    width:95%;
    height:95vh;
    background:#ffb6d9; /* rosa más fuerte */
    border-radius:20px;
    box-shadow:0 10px 30px rgba(0,0,0,0.15);
    display:flex;
    flex-direction:column;
}

#layout{
    display:flex;
    height:80%;
}

#text{
    width:50%;
    padding:40px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    color:#7a003c;
}

#tree-area{
    width:50%;
    display:flex;
    justify-content:center;
    align-items:flex-end;
}

canvas{
    display:block;
}

#counter{
    height:20%;
    display:flex;
    justify-content:center;
    align-items:center;
    text-align:center;
    font-size:16px;
    color:#880e4f;
    padding:10px;
}
</style>
</head>

<body>

<div id="container">

<div id="layout">

<div id="text">
    <h2>Para Laura ❤️</h2>
    <p>Eres la persona que llena mi mundo.</p>
    <p>Eres mi felicidad y mi paz.</p>
    <p>Eres el amor que encontré sin buscar.</p>
    <p>Y cada día contigo es un regalo maravilloso.</p>
</div>

<div id="tree-area">
    <canvas id="treeCanvas"></canvas>
</div>

</div>

<div id="counter"></div>

</div>

<script>
const canvas=document.getElementById("treeCanvas");
const ctx=canvas.getContext("2d");

function resize(){
    canvas.width=window.innerWidth/2.2;
    canvas.height=window.innerHeight*0.75;
}
resize();
window.addEventListener("resize",resize);

let branches=[];
let endpoints=[];
let allPoints=[];
let started=false;

canvas.addEventListener("click",()=>{
    if(!started){
        started=true;
        startTree();
    }
});

function startTree(){
    branches.push({
        x:canvas.width/2,
        y:canvas.height,
        length:120,
        angle:-90,
        width:18
    });
    grow();
}

function grow(){
    if(branches.length===0){
        drawFlowers();
        return;
    }

    let newBranches=[];

    branches.forEach(branch=>{
        const rad=branch.angle*Math.PI/180;
        const x2=branch.x+branch.length*Math.cos(rad);
        const y2=branch.y+branch.length*Math.sin(rad);

        ctx.strokeStyle="#6b3e26";
        ctx.lineWidth=branch.width;
        ctx.lineCap="round";

        ctx.beginPath();
        ctx.moveTo(branch.x,branch.y);
        ctx.lineTo(x2,y2);
        ctx.stroke();

        allPoints.push({x:x2,y:y2,width:branch.width});

        if(branch.width>2){
            const count=2+Math.floor(Math.random()*2);

            for(let i=0;i<count;i++){
                newBranches.push({
                    x:x2,
                    y:y2,
                    length:branch.length*0.75,
                    angle:branch.angle+(Math.random()*90-45),
                    width:branch.width*0.7
                });
            }
        }else{
            endpoints.push({x:x2,y:y2});
        }
    });

    branches=newBranches;
    setTimeout(grow,140);
}

function drawHeart(x,y,size){
    ctx.fillStyle="#ff2e6e";
    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.bezierCurveTo(x-size,y-size,
                      x-size*1.6,y+size/2,
                      x,y+size);
    ctx.bezierCurveTo(x+size*1.6,y+size/2,
                      x+size,y-size,
                      x,y);
    ctx.fill();
}

function drawFlowers(){

    // flores en puntas
    endpoints.forEach(point=>{
        for(let i=0;i<4;i++){
            drawHeart(
                point.x+(Math.random()*12-6),
                point.y+(Math.random()*12-6),
                6
            );
        }
    });

    // flores en ramas medias (más frondoso)
    allPoints.forEach(point=>{
        if(point.width<8){ 
            if(Math.random()>0.5){
                drawHeart(
                    point.x+(Math.random()*10-5),
                    point.y+(Math.random()*10-5),
                    5
                );
            }
        }
    });
}

// contador
const startDate=new Date("2023-08-20");

function updateCounter(){
    const now=new Date();
    const diff=now-startDate;
    const days=Math.floor(diff/(1000*60*60*24));
    const years=Math.floor(days/365);
    const months=Math.floor((days%365)/30);
    const remainingDays=days%30;

    document.getElementById("counter").innerText=
    `Mi amor por ti comenzó el 20/08/2023 ❤️
Han pasado ${years} años, ${months} meses y ${remainingDays} días juntos`;
}
updateCounter();
setInterval(updateCounter,86400000);
</script>

</body>
</html>
