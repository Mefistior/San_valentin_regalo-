<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para Laura ‚ù§Ô∏è</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:#f6d6df;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
}

.wrapper{
    width:95%;
    max-width:1100px;
    background:#f2b8c6;
    border-radius:25px;
    padding:20px;
    box-shadow:0 15px 40px rgba(0,0,0,0.08);
}

/* DIAGRAMA */
.layout{
    display:grid;
    grid-template-columns:1fr 1fr;
    grid-template-rows:auto auto;
    gap:15px;
}

.card{
    background:#ffe6ed;
    border-radius:20px;
    padding:20px;
    box-shadow:0 8px 20px rgba(0,0,0,0.05);
}

/* TEXTO */
.text{
    grid-column:1;
    grid-row:1;
}

h1{ color:#7a2e45; margin-bottom:10px; }
p{ color:#5a2a3b; line-height:1.5; }

/* √ÅRBOL */
.tree{
    grid-column:2;
    grid-row:1;
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden; /* PARA QUE SE CORTE EN BORDES */
    position:relative;
}

canvas{
    width:110%;
    height:500px;
}

/* CONTADOR */
.counter{
    grid-column:1 / span 2;
    grid-row:2;
    text-align:center;
    font-size:17px;
    color:#6b2e44;
}

/* BOT√ìN */
#musicBtn{
    position:fixed;
    bottom:20px;
    right:20px;
    background:#ffffffdd;
    border:none;
    padding:12px 18px;
    border-radius:30px;
    cursor:pointer;
    box-shadow:0 8px 20px rgba(0,0,0,0.15);
}
</style>
</head>

<body>

<div class="wrapper">
<div class="layout">

<div class="card text">
<h1>Para Laura ‚ù§Ô∏è</h1>
<p>Eres la persona que llena mi mundo.</p>
<p>Eres mi felicidad y mi paz.</p>
<p>Eres el amor que encontr√© sin buscar.</p>
<p>Y cada d√≠a contigo es un regalo maravilloso.</p>
</div>

<div class="card tree">
<canvas id="treeCanvas"></canvas>
</div>

<div class="card counter" id="counter"></div>

</div>
</div>

<button id="musicBtn">üéµ Nuestra canci√≥n</button>

<audio id="bgMusic" loop>
<source src="cancion.mp3" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("treeCanvas");
const ctx = canvas.getContext("2d");

canvas.width = canvas.offsetWidth;
canvas.height = 500;

/* ===== √ÅRBOL ===== */

let branches=[];
let flowers=[];

function grow(){
    branches.push({
        x:canvas.width/2,
        y:canvas.height-20,
        length:130,
        angle:-Math.PI/2,
        width:22,          // TRONCO M√ÅS GRUESO
        depth:7            // MENOS RAMAS LOCAS
    });
    animate();
}

function animate(){

    if(branches.length===0){
        drawFlowers();
        return;
    }

    let next=[];

    branches.forEach(b=>{
        const x2=b.x+b.length*Math.cos(b.angle);
        const y2=b.y+b.length*Math.sin(b.angle);

        ctx.beginPath();
        ctx.strokeStyle="#7b4b2a";
        ctx.lineWidth=b.width;
        ctx.lineCap="round";
        ctx.moveTo(b.x,b.y);
        ctx.lineTo(x2,y2);
        ctx.stroke();

        flowers.push({x:x2,y:y2,depth:b.depth});

        if(b.depth>0){
            const nl=b.length*0.75;
            const nw=b.width*0.7;

            next.push({x:x2,y:y2,length:nl,angle:b.angle-0.5,width:nw,depth:b.depth-1});
            next.push({x:x2,y:y2,length:nl,angle:b.angle+0.5,width:nw,depth:b.depth-1});
        }
    });

    branches=next;
    setTimeout(animate,80);
}

/* FLORES */
function flower(x,y,size,color){
    ctx.fillStyle=color;
    ctx.beginPath();
    ctx.arc(x,y,size,0,Math.PI*2);
    ctx.fill();
}

function drawFlowers(){
    const colors=["#ff8fab","#f497b6","#e77fa3","#ffc2d1"];

    flowers.forEach(p=>{
        if(p.depth<=4 || Math.random()>0.4){
            flower(
                p.x+(Math.random()*15-7),
                p.y+(Math.random()*15-7),
                4+Math.random()*5,
                colors[Math.floor(Math.random()*colors.length)]
            );
        }
    });
}

grow();

/* ===== CONTADOR ===== */

const start=new Date("2023-08-20");

function update(){
    const now=new Date();
    let y=now.getFullYear()-start.getFullYear();
    let m=now.getMonth()-start.getMonth();
    let d=now.getDate()-start.getDate();

    if(d<0){ m--; d+=new Date(now.getFullYear(),now.getMonth(),0).getDate();}
    if(m<0){ y--; m+=12;}

    document.getElementById("counter").innerHTML=
    `Mi amor por ti comenz√≥ el 20/08/2023 ‚ù§Ô∏è<br>
    Han pasado ${y} a√±os, ${m} meses y ${d} d√≠as juntos`;
}
update();
setInterval(update,86400000);

/* ===== M√öSICA ===== */

const music=document.getElementById("bgMusic");
const btn=document.getElementById("musicBtn");

btn.addEventListener("click",()=>{
    if(music.paused){
        music.play();
        btn.innerText="üíó Pausar";
    }else{
        music.pause();
        btn.innerText="üéµ Nuestra canci√≥n";
    }
});
</script>

</body>
</html>
