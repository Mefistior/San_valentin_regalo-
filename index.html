<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Regalo de San Valent√≠n</title>

<style>
body{
    margin:0;
    font-family: 'Georgia', serif;
    background: linear-gradient(to bottom,#e9b7c5,#dba3b4);
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
}

.container{
    width:90%;
    max-width:1000px;
    background:#e4c2cc;
    padding:40px;
    border-radius:25px;
    box-shadow:0 20px 40px rgba(0,0,0,0.15);
}

.top{
    display:flex;
    gap:30px;
}

.card{
    flex:1;
    background:#f4e7ec;
    padding:35px;
    border-radius:25px;
    box-shadow:0 10px 25px rgba(0,0,0,0.08);
}

h1{
    margin-top:0;
    color:#7b2e46;
}

p{
    color:#6a3a4a;
    font-size:18px;
    line-height:1.6;
}

.tree-card{
    display:flex;
    justify-content:center;
    align-items:center;
}

canvas{
    width:100%;
    height:420px;
}

.counter{
    margin-top:30px;
    background:#f4e7ec;
    padding:20px;
    border-radius:20px;
    text-align:center;
    color:#7b2e46;
    font-size:18px;
    box-shadow:0 10px 25px rgba(0,0,0,0.08);
}

.music{
    margin-top:25px;
    text-align:center;
}

.music button{
    padding:12px 28px;
    border:none;
    border-radius:30px;
    background:#c86586;
    color:white;
    font-size:16px;
    cursor:pointer;
    transition:0.3s;
}

.music button:hover{
    background:#b75474;
}
</style>
</head>

<body>

<div class="container">

    <div class="top">

        <div class="card">
            <h1>Para Laura ‚ù§Ô∏è</h1>
            <p>Eres la persona que llena mi mundo.</p>
            <p>Eres mi felicidad y mi paz.</p>
            <p>Eres el amor que encontr√© sin buscar.</p>
            <p>Y cada d√≠a contigo es un regalo maravilloso.</p>
        </div>

        <div class="card tree-card">
            <canvas id="treeCanvas"></canvas>
        </div>

    </div>

    <div class="counter" id="counter"></div>

    <div class="music">
        <button id="playBtn">üéµ Nuestra canci√≥n</button>
        <audio id="music" src="cancion.mp3"></audio>
    </div>

</div>

<script>
const canvas = document.getElementById("treeCanvas");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

let animationStarted = false;

function drawBranch(x,y,length,angle,depth){
    if(depth===0) return;

    const x2 = x + length*Math.cos(angle);
    const y2 = y + length*Math.sin(angle);

    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.lineTo(x2,y2);
    ctx.strokeStyle="#6b3e26";
    ctx.lineWidth = depth+1;
    ctx.stroke();

    drawBranch(x2,y2,length*0.75,angle-0.4,depth-1);
    drawBranch(x2,y2,length*0.75,angle+0.4,depth-1);
}

function drawHeart(x,y,size,color){
    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.bezierCurveTo(x,y-size/2,x-size/2,y-size/2,x-size/2,y);
    ctx.bezierCurveTo(x-size/2,y+size/2,x,y+size/2,x,y+size);
    ctx.bezierCurveTo(x,y+size/2,x+size/2,y+size/2,x+size/2,y);
    ctx.bezierCurveTo(x+size/2,y-size/2,x,y-size/2,x,y);
    ctx.fillStyle=color;
    ctx.fill();
}

function animateTree(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    drawBranch(canvas.width/2,canvas.height,120,-Math.PI/2,7);

    const colors=["#ff6f91","#ff8fab","#ff4d6d","#f78fb3"];
    for(let i=0;i<120;i++){
        const x = canvas.width/2 + (Math.random()-0.5)*220;
        const y = canvas.height/2 + (Math.random()-0.5)*180;
        drawHeart(x,y,10,colors[Math.floor(Math.random()*colors.length)]);
    }
}

canvas.addEventListener("click",()=>{
    if(!animationStarted){
        animationStarted=true;
        animateTree();
    }
});

// Contador exacto
const startDate = new Date("2023-08-20");

function updateCounter(){
    const now = new Date();
    let years = now.getFullYear() - startDate.getFullYear();
    let months = now.getMonth() - startDate.getMonth();
    let days = now.getDate() - startDate.getDate();

    if(days<0){
        months--;
        const prevMonth = new Date(now.getFullYear(), now.getMonth(), 0).getDate();
        days += prevMonth;
    }

    if(months<0){
        years--;
        months+=12;
    }

    document.getElementById("counter").innerHTML =
    `Mi amor por ti comenz√≥ el 20/08/2023 ‚ù§Ô∏è<br>
    Han pasado ${years} a√±os, ${months} meses y ${days} d√≠as juntos`;
}
updateCounter();
setInterval(updateCounter,1000);

// M√∫sica
const audio = document.getElementById("music");
document.getElementById("playBtn").addEventListener("click",()=>{
    audio.play();
});
</script>

</body>
</html>
