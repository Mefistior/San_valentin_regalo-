<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para Laura わ</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:#f6d6df;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
}

.main-card{
    width:95%;
    max-width:1200px;
    background:#f2b8c6;
    border-radius:25px;
    padding:25px;
    box-shadow:0 15px 40px rgba(0,0,0,0.08);
}

.top{
    display:flex;
    gap:20px;
    flex-wrap:wrap;
}

.section{
    background:#ffe6ed;
    border-radius:20px;
    padding:25px;
    box-shadow:0 8px 20px rgba(0,0,0,0.05);
}

.left{ flex:1; min-width:280px; }
.right{ flex:1; min-width:280px; display:flex; justify-content:center; align-items:center; }

.bottom{ margin-top:20px; }

#counter{
    text-align:center;
    font-size:18px;
    color:#6b2e44;
}

canvas{
    width:100%;
    height:420px;
}

h1{ color:#7a2e45; }
p{ color:#5a2a3b; line-height:1.6; }

#musicBtn{
    position:fixed;
    bottom:20px;
    right:20px;
    background:#ffffffcc;
    border:none;
    padding:12px 18px;
    border-radius:30px;
    font-size:14px;
    cursor:pointer;
    box-shadow:0 8px 20px rgba(0,0,0,0.15);
    backdrop-filter:blur(6px);
    transition:all 0.3s ease;
}

#musicBtn:hover{
    transform:scale(1.05);
}
</style>
</head>

<body>

<div class="main-card">

<div class="top">

<div class="section left">
<h1>Para Laura わ</h1>
<p>Eres la persona que llena mi mundo.</p>
<p>Eres mi felicidad y mi paz.</p>
<p>Eres el amor que encontr茅 sin buscar.</p>
<p>Y cada d铆a contigo es un regalo maravilloso.</p>
</div>

<div class="section right">
<canvas id="treeCanvas"></canvas>
</div>

</div>

<div class="section bottom">
<div id="counter"></div>
</div>

</div>

<button id="musicBtn"> Nuestra canci贸n</button>

<audio id="bgMusic" loop>
<source src="https://dl.sndup.net/3c8r/Los%20Retros%20-%20Someone%20To%20Spend%20Time%20With.mp3" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("treeCanvas");
const ctx = canvas.getContext("2d");
canvas.width = canvas.offsetWidth;
canvas.height = 420;

let branches = [];
let heartPoints = [];
let treeFinished = false;

function startTree(){
    branches.push({
        x: canvas.width/2,
        y: canvas.height-10,
        length:110,
        angle:-Math.PI/2,
        width:12,
        depth:9
    });
    animate();
}

function animate(){
    if(branches.length===0){
        drawHearts();
        treeFinished = true;
        startMusicAuto();
        return;
    }

    let newBranches=[];

    branches.forEach(b=>{
        const x2=b.x+b.length*Math.cos(b.angle);
        const y2=b.y+b.length*Math.sin(b.angle);

        ctx.beginPath();
        ctx.strokeStyle="#7b4b2a";
        ctx.lineWidth=b.width;
        ctx.lineCap="round";
        ctx.moveTo(b.x,b.y);
        ctx.lineTo(x2,y2);
        ctx.stroke();

        heartPoints.push({x:x2,y:y2,depth:b.depth});

        if(b.depth>0){
            const nl=b.length*0.75;
            const nw=b.width*0.7;

            newBranches.push({x:x2,y:y2,length:nl,angle:b.angle-0.6,width:nw,depth:b.depth-1});
            newBranches.push({x:x2,y:y2,length:nl,angle:b.angle+0.6,width:nw,depth:b.depth-1});
        }
    });

    branches=newBranches;
    setTimeout(animate,110);
}

function drawHeart(x,y,size,color){
    ctx.fillStyle=color;
    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.bezierCurveTo(x,y-size/2,x-size/2,y-size/2,x-size/2,y);
    ctx.bezierCurveTo(x-size/2,y+size/2,x,y+size/2,x,y+size);
    ctx.bezierCurveTo(x,y+size/2,x+size/2,y+size/2,x+size/2,y);
    ctx.bezierCurveTo(x+size/2,y-size/2,x,y-size/2,x,y);
    ctx.fill();
}

function drawHearts(){
    const colors=["#f497b6","#e77fa3","#ff8fab","#f6a5b6","#ffc2d1"];

    heartPoints.forEach(p=>{
        if(p.depth<=5 || Math.random()>0.4){
            const size=6+Math.random()*8;
            const ox=(Math.random()*20-10);
            const oy=(Math.random()*20-10);
            drawHeart(p.x+ox,p.y+oy,size,
                colors[Math.floor(Math.random()*colors.length)]
            );
        }
    });
}

startTree();

/* CONTADOR */
const startDate=new Date("2023-08-20T00:00:00");

function updateCounter(){
    const now=new Date();
    let years=now.getFullYear()-startDate.getFullYear();
    let months=now.getMonth()-startDate.getMonth();
    let days=now.getDate()-startDate.getDate();

    if(days<0){
        months--;
        days+=new Date(now.getFullYear(),now.getMonth(),0).getDate();
    }
    if(months<0){
        years--;
        months+=12;
    }

    document.getElementById("counter").innerHTML=
    `Mi amor por ti comenz贸 el 20/08/2023 わ<br>
    Han pasado ${years} a帽os, ${months} meses y ${days} d铆as juntos`;
}

updateCounter();
setInterval(updateCounter,86400000);

/* MSICA */
const music = document.getElementById("bgMusic");
const btn = document.getElementById("musicBtn");

function startMusicAuto(){
    music.volume = 0;
    music.play().then(()=>{
        fadeIn();
        btn.innerText=" Pausar canci贸n";
    }).catch(()=>{});
}

btn.addEventListener("click",()=>{
    if(music.paused){
        music.play();
        fadeIn();
        btn.innerText=" Pausar canci贸n";
    }else{
        music.pause();
        btn.innerText=" Nuestra canci贸n";
    }
});

function fadeIn(){
    let vol=0;
    const interval=setInterval(()=>{
        if(vol<1){
            vol+=0.05;
            music.volume=vol;
        }else{
            clearInterval(interval);
        }
    },200);
}
</script>

</body>
</html>
